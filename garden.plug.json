{
  "name": "garden",
  "version": 0.1,
  "imports": [
    "https://get.silverbullet.md/global.plug.json"
  ],
  "functions": {
    "randomMissing": {
      "command": {
        "name": "Garden: Random missing page"
      },
      "code": "(() => { var mod=(()=>{var p=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var l=(e,t)=>{for(var n in t)p(e,n,{get:t[n],enumerable:!0})},h=(e,t,n,o)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of P(t))!y.call(e,i)&&i!==n&&p(e,i,{get:()=>t[i],enumerable:!(o=x(t,i))||o.enumerable});return e};var v=e=>h(p({},\"__esModule\",{value:!0}),e);var de={};l(de,{default:()=>pe});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var u={};l(u,{dispatch:()=>I,enableReadOnlyMode:()=>K,filterBox:()=>R,flashNotification:()=>D,getCurrentPage:()=>T,getCursor:()=>A,getSelection:()=>M,getText:()=>k,hidePanel:()=>L,insertAtCursor:()=>Q,insertAtPos:()=>N,matchBefore:()=>U,moveCursor:()=>_,navigate:()=>C,openUrl:()=>q,prompt:()=>V,reloadPage:()=>E,replaceRange:()=>O,save:()=>S,setPage:()=>w,setSelection:()=>F,showPanel:()=>B});function T(){return r(\"editor.getCurrentPage\")}function w(e){return r(\"editor.setPage\",e)}function k(){return r(\"editor.getText\")}function A(){return r(\"editor.getCursor\")}function M(){return r(\"editor.getSelection\")}function F(e,t){return r(\"editor.setSelection\",e,t)}function S(){return r(\"editor.save\")}function C(e,t,n=!1){return r(\"editor.navigate\",e,t,n)}function E(){return r(\"editor.reloadPage\")}function q(e){return r(\"editor.openUrl\",e)}function D(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function R(e,t,n=\"\",o=\"\"){return r(\"editor.filterBox\",e,t,n,o)}function B(e,t,n,o=\"\"){return r(\"editor.showPanel\",e,t,n,o)}function L(e){return r(\"editor.hidePanel\",e)}function N(e,t){return r(\"editor.insertAtPos\",e,t)}function O(e,t,n){return r(\"editor.replaceRange\",e,t,n)}function _(e){return r(\"editor.moveCursor\",e)}function Q(e){return r(\"editor.insertAtCursor\",e)}function U(e){return r(\"editor.matchBefore\",e)}function I(e){return r(\"editor.dispatch\",e)}function V(e,t=\"\"){return r(\"editor.prompt\",e,t)}function K(e){return r(\"editor.enableReadOnlyMode\",e)}var c={};l(c,{deleteAttachment:()=>te,deletePage:()=>W,getAttachmentMeta:()=>Z,getPageMeta:()=>G,listAttachments:()=>Y,listPages:()=>z,listPlugs:()=>X,readAttachment:()=>ee,readPage:()=>H,writeAttachment:()=>re,writePage:()=>J});function z(e=!1){return r(\"space.listPages\",e)}function G(e){return r(\"space.getPageMeta\",e)}function H(e){return r(\"space.readPage\",e)}function J(e,t){return r(\"space.writePage\",e,t)}function W(e){return r(\"space.deletePage\",e)}function X(){return r(\"space.listPlugs\")}function Y(){return r(\"space.listAttachments\")}function Z(e){return r(\"space.getAttachmentMeta\",e)}function ee(e){return r(\"space.readAttachment\",e)}function re(e,t,n){return r(\"space.writeAttachment\",e,t,n)}function te(e){return r(\"space.deleteAttachment\",e)}var a=self.syscall;var f={};l(f,{dispatchEvent:()=>ie,listEvents:()=>se});function ie(e,t,n){return new Promise((o,i)=>{let s=-1;n&&(s=setTimeout(()=>{console.log(\"Timeout!\"),i(\"timeout\")},n)),a(\"event.dispatch\",e,t).then(g=>{s!==-1&&clearTimeout(s),o(g)}).catch(i)})}function se(){return a(\"event.list\")}async function m(){let e=await f.dispatchEvent(\"query:allLinks\",{query:{table:\"pl\",filter:[]}},1e4),t=new Set;for(let s of e[0])t.add(s.to_page);let n=new Set;for(let s of await c.listPages())n.add(s.name);let o=[...t].filter(s=>!n.has(s)),i=Math.floor(Math.random()*o.length);await u.navigate(o[i])}var pe=m;return v(de);})();\n return mod;})()"
    },
    "allLinksQueryProvider": {
      "events": [
        "query:allLinks"
      ],
      "code": "(() => { var mod=(()=>{var d=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var m=(e,r)=>{for(var o in r)d(e,o,{get:r[o],enumerable:!0})},w=(e,r,o,a)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let n of b(r))!T.call(e,n)&&n!==o&&d(e,n,{get:()=>r[n],enumerable:!(a=v(r,n))||a.enumerable});return e};var k=e=>w(d({},\"__esModule\",{value:!0}),e);var te={};m(te,{default:()=>re});function g(e,r){let o=[];if(e.filter.length===0)o=r.slice();else{e:for(let a of r){let n=a;for(let{op:l,prop:s,value:i}of e.filter)switch(l){case\"=\":{let c=n[s];if(Array.isArray(c)&&!Array.isArray(i)){if(!c.includes(i))continue e}else if(Array.isArray(c)&&Array.isArray(i)){if(!c.some(h=>i.includes(h)))continue e}else if(c!=i)continue e;break}case\"!=\":if(n[s]==i)continue e;break;case\"<\":if(!(n[s]<i))continue e;break;case\"<=\":if(!(n[s]<=i))continue e;break;case\">\":if(!(n[s]>i))continue e;break;case\">=\":if(!(n[s]>=i))continue e;break;case\"=~\":if(!new RegExp(i).exec(n[s]))continue e;break;case\"!=~\":if(new RegExp(i).exec(n[s]))continue e;break;case\"in\":if(!i.includes(n[s]))continue e;break}o.push(n)}}return e.orderBy&&(o=o.sort((a,n)=>{let l=e.orderBy,s=e.orderDesc;return a[l]===n[l]?0:a[l]<n[l]?s?1:-1:s?-1:1})),e.limit&&(o=o.slice(0,e.limit)),e.select&&(o=o.map(a=>{let n={};for(let l of e.select)n[l]=a[l];return n})),o}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var f={};m(f,{batchSet:()=>F,clearPageIndex:()=>R,clearPageIndexForPage:()=>D,del:()=>C,deletePrefixForPage:()=>L,get:()=>S,query:()=>q,queryPrefix:()=>E,set:()=>M});function M(e,r,o){return t(\"index.set\",e,r,o)}function F(e,r){return t(\"index.batchSet\",e,r)}function S(e,r){return t(\"index.get\",e,r)}function C(e,r){return t(\"index.delete\",e,r)}function E(e){return t(\"index.queryPrefix\",e)}function q(e){return t(\"index.query\",e)}function D(e){return t(\"index.clearPageIndexForPage\",e)}function L(e,r){return t(\"index.deletePrefixForPage\",e,r)}function R(){return t(\"index.clearPageIndex\")}var p={};m(p,{deleteAttachment:()=>G,deletePage:()=>I,getAttachmentMeta:()=>j,getPageMeta:()=>_,listAttachments:()=>K,listPages:()=>O,listPlugs:()=>V,readAttachment:()=>$,readPage:()=>Q,writeAttachment:()=>z,writePage:()=>U});function O(e=!1){return t(\"space.listPages\",e)}function _(e){return t(\"space.getPageMeta\",e)}function Q(e){return t(\"space.readPage\",e)}function U(e,r){return t(\"space.writePage\",e,r)}function I(e){return t(\"space.deletePage\",e)}function V(){return t(\"space.listPlugs\")}function K(){return t(\"space.listAttachments\")}function j(e){return t(\"space.getAttachmentMeta\",e)}function $(e){return t(\"space.readAttachment\",e)}function z(e,r,o){return t(\"space.writeAttachment\",e,r,o)}function G(e){return t(\"space.deleteAttachment\",e)}var u=self.syscall;async function y({query:e}){let r=[],o=new Set((await p.listPages()).map(a=>a.name));for(let{value:a,key:n}of await f.queryPrefix(\"pl:\")){let[,l,s]=n.split(\":\"),i=o.has(l);r.push({from_page:a,to_page:l,from_pos:s,to_page_exists:i})}return g(e,r)}var re=y;return k(te);})();\n return mod;})()"
    },
    "missingPagesQueryProvider": {
      "events": [
        "query:missingPages"
      ],
      "code": "(() => { var mod=(()=>{var d=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var m=(e,r)=>{for(var o in r)d(e,o,{get:r[o],enumerable:!0})},w=(e,r,o,a)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let t of b(r))!T.call(e,t)&&t!==o&&d(e,t,{get:()=>r[t],enumerable:!(a=v(r,t))||a.enumerable});return e};var k=e=>w(d({},\"__esModule\",{value:!0}),e);var te={};m(te,{default:()=>re});function g(e,r){let o=[];if(e.filter.length===0)o=r.slice();else{e:for(let a of r){let t=a;for(let{op:l,prop:i,value:s}of e.filter)switch(l){case\"=\":{let c=t[i];if(Array.isArray(c)&&!Array.isArray(s)){if(!c.includes(s))continue e}else if(Array.isArray(c)&&Array.isArray(s)){if(!c.some(h=>s.includes(h)))continue e}else if(c!=s)continue e;break}case\"!=\":if(t[i]==s)continue e;break;case\"<\":if(!(t[i]<s))continue e;break;case\"<=\":if(!(t[i]<=s))continue e;break;case\">\":if(!(t[i]>s))continue e;break;case\">=\":if(!(t[i]>=s))continue e;break;case\"=~\":if(!new RegExp(s).exec(t[i]))continue e;break;case\"!=~\":if(new RegExp(s).exec(t[i]))continue e;break;case\"in\":if(!s.includes(t[i]))continue e;break}o.push(t)}}return e.orderBy&&(o=o.sort((a,t)=>{let l=e.orderBy,i=e.orderDesc;return a[l]===t[l]?0:a[l]<t[l]?i?1:-1:i?-1:1})),e.limit&&(o=o.slice(0,e.limit)),e.select&&(o=o.map(a=>{let t={};for(let l of e.select)t[l]=a[l];return t})),o}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var n=self.syscall;var f={};m(f,{batchSet:()=>F,clearPageIndex:()=>B,clearPageIndexForPage:()=>D,del:()=>C,deletePrefixForPage:()=>R,get:()=>S,query:()=>q,queryPrefix:()=>E,set:()=>M});function M(e,r,o){return n(\"index.set\",e,r,o)}function F(e,r){return n(\"index.batchSet\",e,r)}function S(e,r){return n(\"index.get\",e,r)}function C(e,r){return n(\"index.delete\",e,r)}function E(e){return n(\"index.queryPrefix\",e)}function q(e){return n(\"index.query\",e)}function D(e){return n(\"index.clearPageIndexForPage\",e)}function R(e,r){return n(\"index.deletePrefixForPage\",e,r)}function B(){return n(\"index.clearPageIndex\")}var p={};m(p,{deleteAttachment:()=>G,deletePage:()=>I,getAttachmentMeta:()=>j,getPageMeta:()=>_,listAttachments:()=>K,listPages:()=>O,listPlugs:()=>V,readAttachment:()=>$,readPage:()=>Q,writeAttachment:()=>z,writePage:()=>U});function O(e=!1){return n(\"space.listPages\",e)}function _(e){return n(\"space.getPageMeta\",e)}function Q(e){return n(\"space.readPage\",e)}function U(e,r){return n(\"space.writePage\",e,r)}function I(e){return n(\"space.deletePage\",e)}function V(){return n(\"space.listPlugs\")}function K(){return n(\"space.listAttachments\")}function j(e){return n(\"space.getAttachmentMeta\",e)}function $(e){return n(\"space.readAttachment\",e)}function z(e,r,o){return n(\"space.writeAttachment\",e,r,o)}function G(e){return n(\"space.deleteAttachment\",e)}var u=self.syscall;async function y({query:e}){let r=new Set,o=new Set((await p.listPages()).map(t=>t.name));for(let{value:t,key:l}of await f.queryPrefix(\"pl:\")){let[,i,s]=l.split(\":\");o.has(i)||r.add(i)}let a=[];for(let t of r)a.push({name:t});return g(e,a)}var re=y;return k(te);})();\n return mod;})()"
    }
  },
  "assets": {}
}