{
  "name": "garden",
  "version": 0.1,
  "imports": [
    "https://get.silverbullet.md/global.plug.json"
  ],
  "functions": {
    "randomMissing": {
      "command": {
        "name": "Garden: Random missing page"
      },
      "code": "(() => { var mod=(()=>{var c=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var f=(e,r)=>{for(var n in r)c(e,n,{get:r[n],enumerable:!0})},h=(e,r,n,o)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let i of P(r))!y.call(e,i)&&i!==n&&c(e,i,{get:()=>r[i],enumerable:!(o=x(r,i))||o.enumerable});return e};var v=e=>h(c({},\"__esModule\",{value:!0}),e);var te={};f(te,{default:()=>re});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var a={};f(a,{dispatch:()=>I,enableReadOnlyMode:()=>K,filterBox:()=>L,flashNotification:()=>D,getCurrentPage:()=>T,getCursor:()=>w,getSelection:()=>M,getText:()=>k,hidePanel:()=>_,insertAtCursor:()=>Q,insertAtPos:()=>B,matchBefore:()=>U,moveCursor:()=>O,navigate:()=>S,openUrl:()=>q,prompt:()=>V,reloadPage:()=>E,replaceRange:()=>N,save:()=>C,setPage:()=>A,setSelection:()=>F,showPanel:()=>R});function T(){return t(\"editor.getCurrentPage\")}function A(e){return t(\"editor.setPage\",e)}function k(){return t(\"editor.getText\")}function w(){return t(\"editor.getCursor\")}function M(){return t(\"editor.getSelection\")}function F(e,r){return t(\"editor.setSelection\",e,r)}function C(){return t(\"editor.save\")}function S(e,r,n=!1){return t(\"editor.navigate\",e,r,n)}function E(){return t(\"editor.reloadPage\")}function q(e){return t(\"editor.openUrl\",e)}function D(e,r=\"info\"){return t(\"editor.flashNotification\",e,r)}function L(e,r,n=\"\",o=\"\"){return t(\"editor.filterBox\",e,r,n,o)}function R(e,r,n,o=\"\"){return t(\"editor.showPanel\",e,r,n,o)}function _(e){return t(\"editor.hidePanel\",e)}function B(e,r){return t(\"editor.insertAtPos\",e,r)}function N(e,r,n){return t(\"editor.replaceRange\",e,r,n)}function O(e){return t(\"editor.moveCursor\",e)}function Q(e){return t(\"editor.insertAtCursor\",e)}function U(e){return t(\"editor.matchBefore\",e)}function I(e){return t(\"editor.dispatch\",e)}function V(e,r=\"\"){return t(\"editor.prompt\",e,r)}function K(e){return t(\"editor.enableReadOnlyMode\",e)}var s=self.syscall;var l={};f(l,{dispatchEvent:()=>H,listEvents:()=>J});function H(e,r,n){return new Promise((o,i)=>{let u=-1;n&&(u=setTimeout(()=>{console.log(\"Timeout!\"),i(\"timeout\")},n)),s(\"event.dispatch\",e,r).then(g=>{u!==-1&&clearTimeout(u),o(g)}).catch(i)})}function J(){return s(\"event.list\")}async function m(){let e=await l.dispatchEvent(\"query:allLinks\",{query:{table:\"pl\",filter:[{op:\"=\",prop:\"to_page_exists\",value:!1}]}},1e4),r=Math.floor(Math.random()*e[0].length);await a.navigate(e[0][r].to_page)}var re=m;return v(te);})();\n return mod;})()"
    },
    "allLinksQueryProvider": {
      "events": [
        "query:allLinks"
      ],
      "code": "(() => { var mod=(()=>{var d=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var m=(e,r)=>{for(var o in r)d(e,o,{get:r[o],enumerable:!0})},A=(e,r,o,a)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let n of b(r))!T.call(e,n)&&n!==o&&d(e,n,{get:()=>r[n],enumerable:!(a=v(r,n))||a.enumerable});return e};var k=e=>A(d({},\"__esModule\",{value:!0}),e);var ne={};m(ne,{default:()=>te});function g(e,r){let o=[];if(e.filter.length===0)o=r.slice();else{e:for(let a of r){let n=a;for(let{op:l,prop:i,value:s}of e.filter)switch(l){case\"=\":{let c=n[i];if(Array.isArray(c)&&!Array.isArray(s)){if(!c.includes(s))continue e}else if(Array.isArray(c)&&Array.isArray(s)){if(!c.some(h=>s.includes(h)))continue e}else if(c!=s)continue e;break}case\"!=\":if(n[i]==s)continue e;break;case\"<\":if(!(n[i]<s))continue e;break;case\"<=\":if(!(n[i]<=s))continue e;break;case\">\":if(!(n[i]>s))continue e;break;case\">=\":if(!(n[i]>=s))continue e;break;case\"=~\":if(!new RegExp(s).exec(n[i]))continue e;break;case\"!=~\":if(new RegExp(s).exec(n[i]))continue e;break;case\"in\":if(!s.includes(n[i]))continue e;break}o.push(n)}}return e.orderBy&&(o=o.sort((a,n)=>{let l=e.orderBy,i=e.orderDesc;return a[l]===n[l]?0:a[l]<n[l]?i?1:-1:i?-1:1})),e.limit&&(o=o.slice(0,e.limit)),e.select&&(o=o.map(a=>{let n={};for(let l of e.select)n[l]=a[l];return n})),o}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var t=self.syscall;var f={};m(f,{batchSet:()=>F,clearPageIndex:()=>R,clearPageIndexForPage:()=>q,del:()=>S,deletePrefixForPage:()=>D,get:()=>C,query:()=>L,queryPrefix:()=>E,set:()=>M});function M(e,r,o){return t(\"index.set\",e,r,o)}function F(e,r){return t(\"index.batchSet\",e,r)}function C(e,r){return t(\"index.get\",e,r)}function S(e,r){return t(\"index.delete\",e,r)}function E(e){return t(\"index.queryPrefix\",e)}function L(e){return t(\"index.query\",e)}function q(e){return t(\"index.clearPageIndexForPage\",e)}function D(e,r){return t(\"index.deletePrefixForPage\",e,r)}function R(){return t(\"index.clearPageIndex\")}var p={};m(p,{deleteAttachment:()=>G,deletePage:()=>I,getAttachmentMeta:()=>j,getPageMeta:()=>O,listAttachments:()=>K,listPages:()=>N,listPlugs:()=>V,readAttachment:()=>$,readPage:()=>Q,writeAttachment:()=>z,writePage:()=>U});function N(e=!1){return t(\"space.listPages\",e)}function O(e){return t(\"space.getPageMeta\",e)}function Q(e){return t(\"space.readPage\",e)}function U(e,r){return t(\"space.writePage\",e,r)}function I(e){return t(\"space.deletePage\",e)}function V(){return t(\"space.listPlugs\")}function K(){return t(\"space.listAttachments\")}function j(e){return t(\"space.getAttachmentMeta\",e)}function $(e){return t(\"space.readAttachment\",e)}function z(e,r,o){return t(\"space.writeAttachment\",e,r,o)}function G(e){return t(\"space.deleteAttachment\",e)}var u=self.syscall;async function re(){let e=[],r=new Set((await p.listPages()).map(o=>o.name));for(let{value:o,key:a}of await f.queryPrefix(\"pl:\")){let[,n,l]=a.split(\":\"),i=r.has(n);e.push({from_page:o,to_page:n,from_pos:l,to_page_exists:i})}return e}async function y({query:e}){let r=await re();return g(e,r)}var te=y;return k(ne);})();\n return mod;})()"
    },
    "missingPagesQueryProvider": {
      "events": [
        "query:missingPages"
      ],
      "code": "(() => { var mod=(()=>{var d=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var m=(e,r)=>{for(var o in r)d(e,o,{get:r[o],enumerable:!0})},A=(e,r,o,i)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let t of b(r))!T.call(e,t)&&t!==o&&d(e,t,{get:()=>r[t],enumerable:!(i=v(r,t))||i.enumerable});return e};var k=e=>A(d({},\"__esModule\",{value:!0}),e);var ne={};m(ne,{default:()=>te});function g(e,r){let o=[];if(e.filter.length===0)o=r.slice();else{e:for(let i of r){let t=i;for(let{op:l,prop:s,value:a}of e.filter)switch(l){case\"=\":{let c=t[s];if(Array.isArray(c)&&!Array.isArray(a)){if(!c.includes(a))continue e}else if(Array.isArray(c)&&Array.isArray(a)){if(!c.some(h=>a.includes(h)))continue e}else if(c!=a)continue e;break}case\"!=\":if(t[s]==a)continue e;break;case\"<\":if(!(t[s]<a))continue e;break;case\"<=\":if(!(t[s]<=a))continue e;break;case\">\":if(!(t[s]>a))continue e;break;case\">=\":if(!(t[s]>=a))continue e;break;case\"=~\":if(!new RegExp(a).exec(t[s]))continue e;break;case\"!=~\":if(new RegExp(a).exec(t[s]))continue e;break;case\"in\":if(!a.includes(t[s]))continue e;break}o.push(t)}}return e.orderBy&&(o=o.sort((i,t)=>{let l=e.orderBy,s=e.orderDesc;return i[l]===t[l]?0:i[l]<t[l]?s?1:-1:s?-1:1})),e.limit&&(o=o.slice(0,e.limit)),e.select&&(o=o.map(i=>{let t={};for(let l of e.select)t[l]=i[l];return t})),o}typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var n=self.syscall;var f={};m(f,{batchSet:()=>F,clearPageIndex:()=>R,clearPageIndexForPage:()=>D,del:()=>S,deletePrefixForPage:()=>L,get:()=>C,query:()=>q,queryPrefix:()=>E,set:()=>M});function M(e,r,o){return n(\"index.set\",e,r,o)}function F(e,r){return n(\"index.batchSet\",e,r)}function C(e,r){return n(\"index.get\",e,r)}function S(e,r){return n(\"index.delete\",e,r)}function E(e){return n(\"index.queryPrefix\",e)}function q(e){return n(\"index.query\",e)}function D(e){return n(\"index.clearPageIndexForPage\",e)}function L(e,r){return n(\"index.deletePrefixForPage\",e,r)}function R(){return n(\"index.clearPageIndex\")}var p={};m(p,{deleteAttachment:()=>G,deletePage:()=>I,getAttachmentMeta:()=>j,getPageMeta:()=>O,listAttachments:()=>K,listPages:()=>N,listPlugs:()=>V,readAttachment:()=>$,readPage:()=>Q,writeAttachment:()=>z,writePage:()=>U});function N(e=!1){return n(\"space.listPages\",e)}function O(e){return n(\"space.getPageMeta\",e)}function Q(e){return n(\"space.readPage\",e)}function U(e,r){return n(\"space.writePage\",e,r)}function I(e){return n(\"space.deletePage\",e)}function V(){return n(\"space.listPlugs\")}function K(){return n(\"space.listAttachments\")}function j(e){return n(\"space.getAttachmentMeta\",e)}function $(e){return n(\"space.readAttachment\",e)}function z(e,r,o){return n(\"space.writeAttachment\",e,r,o)}function G(e){return n(\"space.deleteAttachment\",e)}var u=self.syscall;async function re(){let e=[],r=new Set((await p.listPages()).map(o=>o.name));for(let{value:o,key:i}of await f.queryPrefix(\"pl:\")){let[,t,l]=i.split(\":\"),s=r.has(t);e.push({from_page:o,to_page:t,from_pos:l,to_page_exists:s})}return e}async function y({query:e}){let r=await re(),o=new Set;for(let t of r)t.to_page_exists||o.add(t.to_page);let i=[];for(let t of o)i.push({name:t});return g(e,i)}var te=y;return k(ne);})();\n return mod;})()"
    }
  },
  "assets": {}
}